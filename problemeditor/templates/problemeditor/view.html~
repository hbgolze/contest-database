{% extends './base.html' %}

{% block title %}Problem: {{form.instance.label}}{% endblock %}

{% block head %}
<script type="text/javascript" src="/static/js/custjquery.init.js"></script>
<script type="text/javascript" src="/static/js/custcore.js"></script>
<script type="text/javascript" src="/static/js/custSelectBox.js"></script>
<script type="text/javascript" src="/static/js/custSelectFilter2.js"></script>
<script type="text/javascript" src="/static/js/custjsi18n.js"></script>
<link href="/static/css/widgets2.css" type="text/css" media="all" rel="stylesheet" />
<!--{{ form.media }}-->



{% endblock %}

{% block content %}

<ol class="breadcrumb">
  <li><a href="/problemeditor/">Select Type</a></li>
  <li><a href="../../">{{typelabel}}</a></li>
  <li><a href="../">{{tag}}</a></li>
  <li class="active">{{readablelabel}}</li>
</ol>
    <h2>Edit Problem</h2>
    <form method="POST" class="post-form">{% csrf_token %}
<!--      <img src="{{dropboxpath}}{{ form.instance.label }}j.jpg" /> <br>-->

<div class="form-group">

{% if mc %}
    <label>Problem Text:</label>
    <p>{% autoescape off %}{{mc_prob_latex|linebreaks}} {% endautoescape %}  [{{readablelabel}}]</p>
    <p>Answer: {{mc_answer}}{% if user_type == "super" %} (<a href="editanswer/">Edit Answer</a>){% endif %}
    </p>
  {% endif %}
  {% if sa or pf %}
    <label>Problem Text:</label>
    <p>{% autoescape off %}{{prob_latex|linebreaks}} {% endautoescape %}  [{{readablelabel}}]</p>
    {% if sa %}<p>Answer: {{sa_answer}}{% if user_type == "super" %} (<a href="editanswer/">Edit Answer</a>){% endif %}</p>
    {% endif %}
  {% endif %}
  {% if mcsa %}
  <label>Problem Text (Multiple Choice):</label>
  <p>{% autoescape off %}{{mc_prob_latex|linebreaks}} {% endautoescape %}  [{{readablelabel}}]</p>
<p>Answer: {{mc_answer}}</p>
<label>Problem Text (Short Answer):</label>
<p>{% autoescape off %}{{prob_latex|linebreaks}} {% endautoescape %}  [{{readablelabel}}]</p>
<p>Answer: {{sa_answer}}</p>
{% endif %}


<!--
{% if mc %}
<label>Problem Text:</label>
{% autoescape off %}{{mc_prob_latex|linebreaks}} {% endautoescape %}  [{{readablelabel}}]
{% endif %}
{% if sa or pf %}
<label>Problem Text:</label>
{% autoescape off %}{{prob_latex|linebreaks}} {% endautoescape %}  [{{readablelabel}}]
{% endif %}
{% if mcsa %}
<label>Problem Text (Multiple Choice):</label>
<p>{% autoescape off %}{{mc_prob_latex|linebreaks}} {% endautoescape %}  [{{readablelabel}}]</p>
<label>Problem Text (Short Answer):</label>
<p>{% autoescape off %}{{prob_latex|linebreaks}} {% endautoescape %}  [{{readablelabel}}]</p>
{% endif %}
</div>
{% if form.instance.author_name != '' %}<p>Author: {{form.instance.author_name}}</p>{% endif %}
-->
<!--{% autoescape off %}{{prob_latex|linebreaks}} {% endautoescape %}  [{{readablelabel}}]<br><br>-->
      {% if request.user.is_superuser %}<a href="edittext/">Edit LaTeX Code</a><br>{% endif %}<br>
{% if form.instance.duplicate_problems.count > 0 %}
<label>Duplicate Problems:</label>
<ul>
{% for dp in form.instance.duplicate_problems.all %}
<li>{{dp.label}}: (<a href="/problemeditor/bytest/{{dp.type_new.type}}/{{dp.test_label}}/{{dp.label}}/">Tags</a>) (<a href="/problemeditor/bytest/{{dp.type_new.type}}/{{dp.test_label}}/{{dp.label}}/solutions/">Solutions</a>)</li>
{% endfor %}
</ul>
{% endif %}


<label>Solutions</label><br>
{% for solution,spk in rows %}
  <label>Solution {{forloop.counter}}:</label>
      <p><small>(<a href="editsolution/{{spk}}/">Edit</a>)</small> {% if request.user.is_superuser %}<small>(<a href="deletesolution/{{spk}}/">Delete</a>)</small>{% endif %}</p>
      {% autoescape off %}  {{solution|linebreaks}} {% endautoescape %}
{% endfor %}
{% if rows|length == 0 %}<p>No Solutions Yet</p>{% endif %}
<button type="button" class="save btn btn-default" onclick="location.href='newsolution/'">New Solution</button>
<br><br>
      

        {{ form.as_p }}
<p>
        <button type="submit" class="save btn btn-primary">Save</button>

</p>
    </form>
{% endblock %}
