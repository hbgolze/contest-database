{% extends 'randomtest/base.html' %}


{% block title %}Problem: {{prob.readable_label}}{% endblock %}
{% block head %}
<script type="text/javascript" src="/static/js/custjquery.init.js"></script>
<script type="text/javascript" src="/static/js/custcore.js"></script>
<script type="text/javascript" src="/static/js/custSelectBox.js"></script>
<script type="text/javascript" src="/static/js/custSelectFilter2.js"></script>
<script type="text/javascript" src="/static/js/custjsi18n.js"></script>
<link href="/static/css/widgets2.css" type="text/css" media="all" rel="stylesheet" />
{% endblock %}
{% block content %}
<ol class="breadcrumb">
  <li><a href="/problemeditor/">Select Type</a></li>
{% for breadurl,breadlabel in breadcrumbs %}
  <li><a href="{{breadurl}}">{{breadlabel}}</a></li>
{% endfor %}
  <li class="active">{{prob.readable_label}}</li>
</ol>
    <h1>{{prob.readable_label}}</h1>
<form method="POST" class="post-form">{% csrf_token %}



{% include "problemeditor/snippetprobtext.html" %}

<div class="form-group">
{% if request.user.is_superuser %}<p><a href="edittext/">Edit LaTeX Code{% if prob.question_type_new.question_type == "multiple choice" %} (including answer choices){% endif %}</a></p>{% endif %}
</div>
{% if form.instance.author_name != '' %}<p>Author: {{form.instance.author_name}}</p>{% endif %}

{% if prob.question_type_new.question_type == "multiple choice" %}
<label>Answer:</label>
<p>{{form.mc_answer}}</p>
{% endif %}
{% if prob.question_type_new.question_type == "short answer" %}
<label>Answer:</label>
<p>{{form.sa_answer}}</p>
{% endif %}
{% if prob.question_type_new.question_type == "multiple choice short answer" %}
<p><label>Answer (Multiple Choice):</label>
{{form.mc_answer}}</p>
<p><label>Answer (Short Answer):</label></p>
<p>{{form.sa_answer}}</p>
{% endif %}


<label>Current Question Type:</label>
<p>
{{prob.question_type_new.question_type}} <small>(<a href="change_question_type">Change</a>)</small>
</p>

<label>Difficulty:</label>
<p>
{{form.difficulty}}
</p>

<label>Solutions</label><br>
{% for solution in prob.solutions.all %}
<label>Solution {{forloop.counter}}:</label>
  <p><small>(<a href="editsolution/{{solution.pk}}/">Edit</a>)</small> {% if request.user.is_superuser %}<small>(<a href="deletesolution/{{solution.pk}}/">Delete</a>)</small>{% endif %}</p>
{% autoescape off %}  {{solution.display_solution_text|linebreaks}} {% endautoescape %}
  {% endfor %}
  {% if prob.solutions.count == 0 %}<p>No Solutions Yet</p>{% endif %}
  <button type="button" class="save btn btn-default" onclick="location.href='newsolution/'">New Solution</button>
  <br><br>

<div class="form-group">
  <label for="tags">Tags:</label>
  <p id="tags">
    {{form.tags}}
  </p>
</div>
<div class="form-group">

<p>
  <label>Approvals:</label>
</p>
<p>
{% if prob.approvals.count != 0 %}
<ul>
{% for appr in prob.approvals.all %}
<li>{{appr.author_name}}: {{appr.get_approval_status_display}} <small>(<a href="editreview/{{appr.pk}}/">Edit</a>)</small></li>
{% endfor %}
</ul>
{% else %}
No one has reviewed this problem for approval yet.<br>
{% endif %}
</p>
<p>
<button type="button" class="save btn btn-default" onclick="location.href='newreview/'">New Review</button>
</p>
</div>
    <label>Comments:</label>
<div class="comments-list">
        {% for com in prob.comments.all %}
<div class="media">
<p class="pull-right"><small>{{com.created_date}}</small></p>
<div class="media-body">
<h3 class="media-heading user_name">{{com.author_name}}</h3>
	  <p>{{com.comment_text|linebreaks}}</p>
{% if request.user.is_superuser %}<p><small>(<a href="deletecomment/{{com.pk}}/">Delete</a>)</small></p>{% endif %}

</div>
</div>
        {% endfor %}
</div>
	{% if prob.comments.count == 0 %}<p>No Comments Yet</p>{% endif %}

	<button type="button" class="save btn btn-default" onclick="location.href='newcomment'">New Comment</button>
	<br><br>
<button type="submit" class="save btn btn-primary">Save</button>
</form>
{% endblock %}
