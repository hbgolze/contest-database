{% extends "./base.html" %}

{% block content %}
<h2>My Tests</h2>
<div class="col-md-9">

{% if testcount == 0 %}
You don't have any tests. Start by creating a new test <a href="/createtest/">here</a>.
{% else %}
{% if studentusernames|length > 0 %}
<h3>Students</h3>
<ul>
{% for student in studentusernames %}
<li> <a href="student/{{student}}/">{{student}}</a>
{% endfor %}
</ul>
{% endif %}
<table class="table table-striped">
    <thead>
      <tr>
        <th>Test Name</th>
        <th>Types</th>
	<th>Number of Correct Answers</th>
        <th>Number of Problems</th>
	<th>Date Created</th>
	<th>Options</th>
      </tr>
    </thead>
    <tbody>
      {% for tpk,name,types,num_problems_correct,problems_count,created_date in rows %}
      <tr>
        <td><a href="test/{{tpk}}/">{{name}}</a></td>
        <td> {% for type in types %}
	       {{type}}{% if not forloop.last%},{% endif %}
	     {% endfor %}
	</td>
	<td>{{num_problems_correct}}</td>
        <td>{{problems_count}}</td>
        <td>{{created_date}}</td>
	<td>
	  <form action="edittest/{{tpk}}/" method="post">
	    {% csrf_token %}
	    <button type="submit" name="Edit" value="Edit" class="btn-link">Edit</button>
	  </form>
	</td>
	<td>
	  <a href="viewlatex/{{tpk}}/">View LaTeX</a>
	</td>
	<td>
	  <a href="delete/{{tpk}}/">Delete</a>
	</td>
	<td>
	  <a href="pdftest/{{tpk}}/">View PDF</a>
	</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<div class="col-md-3">
<table class="table table-bordered centered">
<thead>
<tr>
<th>
Number of Problems Solved Today
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<p style="text-align:center;font-size:40px">{{todaycorrect}}</p>
</td>
</tr>
</tbody>
</table>

<table class="table table-striped">
    <thead>
      <tr>
        <th>Recent Responses</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      {% for resp in responselog %}
      <tr>
        <td><small><a href="test/{{resp.test_pk}}/">{{resp.test_label}}</a>: {{resp.problem_label}}: {% if resp.correct == 1 %} <p style="color:green">{% else %}<p style="color:red">{% endif %}{{resp.response}}</p></small></td>
	<td>
	  <small>{{resp.modified_date}}</small>
	</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endif %}
{% endblock %}
