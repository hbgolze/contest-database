{% extends "./base.html" %}

{% block content %}
<script type="text/javascript">
function togglemarked() {
    var y=document.getElementById("problems");
    lang=y.elements.length;

    check=0;
    for (i=0;i<lang;i++) {
        if (y.elements[i].type == "checkbox" && y.elements[i].checked==false) {
            check=1;
        }
    }
    if (check==1) {
        for (i=0;i<lang;i++) {
            y.elements[i].checked=true;
        }
    } else {
        for (i=0;i<lang;i++) {
            y.elements[i].checked=false;
        }
    }
}
</script>

<h2>{{test.name}}</h2>
{{msg}} <br>
<button id="toggler" onclick="togglemarked();">Select/Deselect All</button>
<form action="." method="POST" id="problems">
{% csrf_token %}
<input type="hidden" name="startform" value="{{pk}}">
<table>
<tr>
<th>

</th>
<th>
Problem
</th>
</tr>
{% for label,answer,chk in rows %}
<tr>
<td valign="top"><br>
{{forloop.counter}}.<br>
<input type="checkbox" name="chk{{label}}" {{chk}}/>
</td>
<td>
<img src="{{dropboxpath}}{{label}}j.jpg"/>
</td>
</tr>
{% endfor %}
</table>
<input type="submit" name="remove" value="Remove Unselected Problems" />
</form>
<h3>Add Extra Problems</h3>
<form action="." method="POST" id ="addproblems">
{% csrf_token %}
  <input type="hidden" name="startform" value="start">
{% for test,testlabel in testrows %}
 {% if forloop.counter == 1 %}
  <input type="radio" name="testtype" value="{{test}}" checked="checked"> {{testlabel}} Problems<br>
 {% else %}
  <input type="radio" name="testtype" value="{{test}}"> {{testlabel}} Problems<br>
 {% endif %}
{% endfor %}
<br>
  Desired Tag:<br> <select name="tag">
<option value="Unspecified">Unspecified</option>
</select>
<br><br>
  Number of Problems:<br><input type="number" name="numproblems"> <br><br>
  Range of Problem Numbers (for all problems, leave this blank):<br><input type="number" name="probbegin" style="width: 45px;"> to <input type="number" name="probend" style="width: 45px;"><br><br>
  Year Range (for all years, leave this blank):<br><input type="number" name="yearbegin" style="width: 75px;"> to <input type="number" name="yearend" style="width: 75px;"><br><br>
  <input type="submit" name="addproblems" value="Add Problems">
</form>
{% endblock %}
