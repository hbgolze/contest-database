{% extends "randomtest/base.html" %}

{% block content %}
<h2>Search results for "{{searchterm}}"</h2>
There are {{matchnums}} matching problems in the database.
<br>


<table class="table">
{% for prob in rows %}
<tr>
<td valign="top"><br>
{{ forloop.counter|add:rows.start_index|add:-1 }}.
</td>
<td>
{% if prob.question_type_new.question_type == 'multiple choice' %}
{% autoescape off %}{{prob.display_mc_problem_text|linebreaks}} {% endautoescape %}  [{{prob.readable_label}}] {% if prob.type_new.type|slice:":2" != "CM" %}(<a href="/problemeditor/contest/bytest/{{prob.type_new.type}}/{{prob.test_label}}/{{prob.label}}/">Edit Tags/Solutions</a>){% endif %}<br>
{% else %}
{% autoescape off %}{{prob.display_problem_text|linebreaks}} {% endautoescape %}  [{{prob.readable_label}}] {% if prob.type_new.type|slice:":2" != "CM" %}(<a href="/problemeditor/contest/bytest/{{prob.type_new.type}}/{{prob.test_label}}/{{prob.label}}/">Edit Tags/Solutions</a>){% endif %}<br>
{% endif %}

<p>Add to Problem Group:</p>
  <p>
    <form action="." method="post">
      {% csrf_token %}
      <input type="hidden" name="next" value="{{ request}}">
      <select name="problemgroup_{{prob.pk}}" onchange="this.form.submit()">
	<option value="" disabled selected>Select a Group</option>
	{% for pg in probgroups.all %}
        <option value="{{pg.pk}}">{{pg.name}}
        </option>
	{% endfor %}
      </select>
    </form>
  </p>

</td>
</tr>
{% endfor %}
</table>
{% if rows.has_other_pages %}
<ul class="pagination">
        {% if rows.has_previous %}
            <li><a href="?page={{ rows.previous_page_number }}&{{current_url}}">&laquo;</a></li>
            {% else %}
        <li class="disabled"><span>&laquo;</span></li>
        {% endif %}
        {% for i in rows.paginator.page_range %}
          {% if rows.number == i %}
            <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
          {% else %}
            <li><a href="?page={{ i }}&{{current_url}}">{{ i }}</a></li>
          {% endif %}
        {% endfor %}


        {% if rows.has_next %}
        <li><a href="?page={{ rows.next_page_number }}&{{current_url}}">&raquo;</a></li>
        {% else %}
        <li class="disabled"><span>&raquo;</span></li>
        {% endif %}
</ul>
{% endif %}

{% endblock %}
